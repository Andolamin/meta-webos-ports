From b94ad4f8e1d795e2e31dc94ada3d810955b09b7f Mon Sep 17 00:00:00 2001
From: Martin Jansa <Martin.Jansa@gmail.com>
Date: Thu, 30 Apr 2015 12:15:57 +0200
Subject: [PATCH] qsgtexture: Remove Filtering enum options to resolve conflict
 with X.h

* resolves conflict with X11 headers (X.h) which also defines "None":
  #ifndef None
  #define None                 0L /* universal null resource or null atom */
  #endif
* fixes error like this:
  In file included from usr/include/X11/Xlib.h:44:0,
                   from usr/include/EGL/eglplatform.h:118,
                   from usr/include/EGL/egl.h:36,
                   from luna-next/0.2.0-26+gitAUTOINC+6db63b7f8b-r0/build/plugins/performance/../../../git/plugins/performance/rendertimer.h:28,
                   from luna-next/0.2.0-26+gitAUTOINC+6db63b7f8b-r0/build/plugins/performance/../../../git/plugins/performance/renderingtimes.h:26,
                   from luna-next/0.2.0-26+gitAUTOINC+6db63b7f8b-r0/build/plugins/performance/moc_renderingtimes.cpp:9,
                   from luna-next/0.2.0-26+gitAUTOINC+6db63b7f8b-r0/build/plugins/performance/lunanext-performance-qml_automoc.cpp:5:
  usr/include/qt5/QtQuick/qsgtexture.h:59:9: error: expected identifier before numeric constant
           None,
           ^
  usr/include/qt5/QtQuick/qsgtexture.h:59:9: error: expected '}' before numeric constant
  usr/include/qt5/QtQuick/qsgtexture.h:59:9: error: expected unqualified-id before numeric constant

Change-Id: Ide26cfa2976d3e9519cfa630c629c14bc72565d0
Signed-off-by: Martin Jansa <Martin.Jansa@gmail.com>
---
 src/core/delegated_frame_node.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/core/delegated_frame_node.cpp b/src/core/delegated_frame_node.cpp
index e12873c..9ded58b 100644
--- a/src/core/delegated_frame_node.cpp
+++ b/src/core/delegated_frame_node.cpp
@@ -584,7 +584,7 @@ void DelegatedFrameNode::commit(DelegatedFrameNodeData* data, cc::ReturnedResour
                 QSGSimpleTextureNode *textureNode = new QSGSimpleTextureNode;
                 textureNode->setTextureCoordinatesTransform(tquad->flipped ? QSGSimpleTextureNode::MirrorVertically : QSGSimpleTextureNode::NoTransform);
                 textureNode->setRect(toQt(quad->rect));
-                textureNode->setFiltering(texture->resource().filter == GL_LINEAR ? QSGTexture::Linear : QSGTexture::Nearest);
+                textureNode->setFiltering(texture->resource().filter == GL_LINEAR ? QSGTexture::FilteringLinear : QSGTexture::FilteringNearest);
                 textureNode->setTexture(texture.data());
                 currentLayerChain->appendChildNode(textureNode);
                 break;
@@ -610,7 +610,7 @@ void DelegatedFrameNode::commit(DelegatedFrameNodeData* data, cc::ReturnedResour
 
                 QSGSimpleTextureNode *textureNode = new QSGSimpleTextureNode;
                 textureNode->setRect(toQt(quad->rect));
-                textureNode->setFiltering(texture->resource().filter == GL_LINEAR ? QSGTexture::Linear : QSGTexture::Nearest);
+                textureNode->setFiltering(texture->resource().filter == GL_LINEAR ? QSGTexture::FilteringLinear : QSGTexture::FilteringNearest);
                 textureNode->setTexture(texture.data());
 
                 // FIXME: Find out if we can implement a QSGSimpleTextureNode::setSourceRect instead of this hack.
-- 
2.3.5

