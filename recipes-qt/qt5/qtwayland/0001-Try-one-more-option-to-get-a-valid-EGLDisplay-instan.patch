From 42c94ad7f68a6c73dca08016b2dfb5ff1963527f Mon Sep 17 00:00:00 2001
From: Simon Busch <morphis@gravedo.de>
Date: Mon, 5 Aug 2013 16:01:09 +0000
Subject: [PATCH] Try one more option to get a valid EGLDisplay instance

Upstream-Status: Inappropiate (configuration)

Signed-off-by: Simon Busch <morphis@gravedo.de>
---
 src/plugins/waylandcompositors/wayland-egl/waylandeglintegration.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/plugins/waylandcompositors/wayland-egl/waylandeglintegration.cpp b/src/plugins/waylandcompositors/wayland-egl/waylandeglintegration.cpp
index f77bdc2..d1511ce 100644
--- a/src/plugins/waylandcompositors/wayland-egl/waylandeglintegration.cpp
+++ b/src/plugins/waylandcompositors/wayland-egl/waylandeglintegration.cpp
@@ -115,6 +115,8 @@ void WaylandEglIntegration::initializeHardware(QtWayland::Display *waylandDispla
     QPlatformNativeInterface *nativeInterface = QGuiApplication::platformNativeInterface();
     if (nativeInterface) {
         d->egl_display = nativeInterface->nativeResourceForWindow("EglDisplay", m_compositor->window());
+        if (!d->egl_display)
+            d->egl_display = nativeInterface->nativeResourceForIntegration("EglDisplay");
         if (d->egl_display) {
             const char *extensionString = eglQueryString(d->egl_display, EGL_EXTENSIONS);
             if (extensionString && strstr(extensionString, "EGL_WL_bind_wayland_display"))
-- 
1.8.1.2

