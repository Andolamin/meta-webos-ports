From be759ac34b588d918e40f815c760a10da6bc7890 Mon Sep 17 00:00:00 2001
From: Martin Jansa <Martin.Jansa@gmail.com>
Date: Mon, 27 Apr 2015 17:46:37 +0200
Subject: [PATCH] qsgtexture: Remove Filtering enum options to resolve conflict
  with X.h

* resolves conflict with X11 headers (X.h) which also defines "None":
  #ifndef None
  #define None                 0L /* universal null resource or null atom */
  #endif
* fixes error like this:
  In file included from usr/include/X11/Xlib.h:44:0,
                   from usr/include/EGL/eglplatform.h:118,
                   from usr/include/EGL/egl.h:36,
                   from luna-next/0.2.0-26+gitAUTOINC+6db63b7f8b-r0/build/plugins/performance/../../../git/plugins/performance/rendertimer.h:28,
                   from luna-next/0.2.0-26+gitAUTOINC+6db63b7f8b-r0/build/plugins/performance/../../../git/plugins/performance/renderingtimes.h:26,
                   from luna-next/0.2.0-26+gitAUTOINC+6db63b7f8b-r0/build/plugins/performance/moc_renderingtimes.cpp:9,
                   from luna-next/0.2.0-26+gitAUTOINC+6db63b7f8b-r0/build/plugins/performance/lunanext-performance-qml_automoc.cpp:5:
  usr/include/qt5/QtQuick/qsgtexture.h:59:9: error: expected identifier before numeric constant
           None,
           ^
  usr/include/qt5/QtQuick/qsgtexture.h:59:9: error: expected '}' before numeric constant
  usr/include/qt5/QtQuick/qsgtexture.h:59:9: error: expected unqualified-id before numeric constant

Change-Id: Ide26cfa2976d3e9519cfa630c629c14bc72565d0
Signed-off-by: Martin Jansa <Martin.Jansa@gmail.com>
---
 examples/wayland/server-buffer/compositor/serverbuffertextureprovider.h | 2 +-
 src/compositor/compositor_api/qwaylandsurfaceitem.cpp                   | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/examples/wayland/server-buffer/compositor/serverbuffertextureprovider.h b/examples/wayland/server-buffer/compositor/serverbuffertextureprovider.h
index 76ff5a4..40db8d7 100644
--- a/examples/wayland/server-buffer/compositor/serverbuffertextureprovider.h
+++ b/examples/wayland/server-buffer/compositor/serverbuffertextureprovider.h
@@ -55,7 +55,7 @@ public:
         if (t) {
             t->setHorizontalWrapMode(QSGTexture::ClampToEdge);
             t->setVerticalWrapMode(QSGTexture::ClampToEdge);
-            t->setFiltering(QSGTexture::Linear);
+            t->setFiltering(QSGTexture::FilteringLinear);
         }
         return t;
     }
diff --git a/src/compositor/compositor_api/qwaylandsurfaceitem.cpp b/src/compositor/compositor_api/qwaylandsurfaceitem.cpp
index 35e0cd2..dbda0ef 100644
--- a/src/compositor/compositor_api/qwaylandsurfaceitem.cpp
+++ b/src/compositor/compositor_api/qwaylandsurfaceitem.cpp
@@ -65,7 +65,7 @@ public:
     QSGTexture *texture() const Q_DECL_OVERRIDE
     {
         if (t)
-            t->setFiltering(smooth ? QSGTexture::Linear : QSGTexture::Nearest);
+            t->setFiltering(smooth ? QSGTexture::FilteringLinear : QSGTexture::FilteringNearest);
         return t;
     }
 
-- 
2.3.5

