From 6421efb0b9a51a7657efea5ff6c2ce162c83ac65 Mon Sep 17 00:00:00 2001
From: Martin Jansa <Martin.Jansa@gmail.com>
Date: Fri, 4 Jul 2014 14:26:55 +0200
Subject: [PATCH] connman.service.in: start after android-system.service and
 use EXTRA_PARAM from /etc/connman/environment.conf

---
 src/connman.service.in | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/connman.service.in b/src/connman.service.in
index 8f7f342..ff64aa3 100644
--- a/src/connman.service.in
+++ b/src/connman.service.in
@@ -1,6 +1,6 @@
 [Unit]
 Description=Connection service
-After=dbus.service network-pre.target
+After=dbus.service network-pre.target android-system.service
 Before=network.target remote-fs-pre.target
 Wants=network.target remote-fs-pre.target
 
@@ -8,7 +8,8 @@ Wants=network.target remote-fs-pre.target
 Type=dbus
 BusName=net.connman
 Restart=on-failure
-ExecStart=@sbindir@/connmand -n
+EnvironmentFile=/etc/connman/environment.conf
+ExecStart=@sbindir@/connmand -n $EXTRA_PARAM
 StandardOutput=null
 
 [Install]
-- 
2.6.1

